/*
 *             Copyright (c) 2016 - 2021, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x3b4701}from'ckeditor5/src/core';import{ButtonView as _0x535627,View as _0x599e60,Notification as _0x5e5145}from'ckeditor5/src/ui';import _0x2eecd6 from'./exportpdfcommand';import _0xd6b0d8 from'../theme/icons/exportpdf.svg';import'../theme/exportpdf.css';export default class p extends _0x3b4701{static get['pluginName'](){return'ExportPdf';}static get['requires'](){return['CloudServices',_0x5e5145];}['init'](){const _0x183214=this['editor'],t=_0x183214['t'],_0x2ec0f9=_0x183214['config']['get']('exportPdf')||{};_0x183214['commands']['add']('exportPdf',new _0x2eecd6(_0x183214)),_0x183214['ui']['componentFactory']['add']('exportPdf',_0xf882a2=>{const _0x41956c=_0x183214['commands']['get']('exportPdf'),_0x48b21c=new _0x535627(_0xf882a2);_0x48b21c['set']({'label':t('Export\x20to\x20PDF'),'icon':_0xd6b0d8,'tooltip':!0x0}),_0x48b21c['bind']('isOn','isEnabled')['to'](_0x41956c,'isBusy','isEnabled'),_0x48b21c['extendTemplate']({'attributes':{'class':[_0x48b21c['bindTemplate']['if']('isOn','ck-exportpdf_status-pending')]}});const _0x56e81a=new _0x599e60();return _0x56e81a['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner-container']},'children':[{'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner']}}]}),_0x48b21c['children']['add'](_0x56e81a),this['listenTo'](_0x48b21c,'execute',()=>{_0x183214['execute']('exportPdf',_0x2ec0f9),_0x183214['editing']['view']['focus']();}),_0x48b21c;});const _0x702486=_0x183214['plugins']['get']('CloudServices');if(!0x1===_0x2ec0f9['tokenUrl'])this['_token']=null;else{if(_0x2ec0f9['tokenUrl'])return _0x702486['registerTokenUrl'](_0x2ec0f9['tokenUrl'])['then'](_0xb454d5=>{this['_token']=_0xb454d5;});this['_token']=_0x702486['token'];}}}